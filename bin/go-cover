#!/usr/bin/env bash
#
# go-cover(1): run tests and open a coverage report for the given packages.
#
# USAGE:
#
#   go-cover -v ./git/odb/pack
#   go-cover -v ./git/...
#   go-cover ./...
#
# SEE ALSO:
#
#   go help test

set -e

main() {
  tmp=$(mktemp)

  go test -coverprofile="$tmp" "$@"

  go tool cover -html="$tmp"
}

main "$@";
