#!/usr/bin/env bash

set -e

if [ 1 -ne $# ]; then
  echo >&2 "fatal: expected lore.kernel.org URL, aborting ..."
  exit 1
fi

if test -f "mbox"; then
  echo >&2 "fatal: 'mbox' already exists, refusing to overwrite ..."
  exit 1
fi

mbox=$(mktemp)
curl "$(echo $1 | sed -e 's/\/T\/.*//' | sed -e 's/\/$//')/t.mbox.gz" | gunzip >mbox
mutt -f mbox
